{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/js/main.js","src/js/modules/accordion.js","src/js/modules/anchor.js","src/js/modules/form-error-handler.js","src/js/modules/menu.js","src/js/modules/popup.js","src/js/modules/slider.js"],"names":[],"mappings":"AAAA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7MA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"main.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","var Menu             = require('./modules/menu.js');\r\nvar Slider           = require('./modules/slider.js');\r\nvar Accordion        = require('./modules/accordion.js');\r\nvar Popup            = require('./modules/popup.js');\r\nvar Anchor           = require('./modules/anchor.js');\r\nvar formErrorHandler = require('./modules/form-error-handler.js');\r\n\r\n$(document).ready(function() {\r\n\r\n    var menu          = $('.menu:not(.menu_opened):not(.menu_catalog)');\r\n    var slider        = $('.slider:not(.slider_narrow)');\r\n    var sliderNarrow  = $('.slider.slider_narrow');\r\n    var popupSlider   = $('.popup-slider');\r\n    var menuOpened    = $('.menu.menu_opened');\r\n    var containerMore = $('.container-more');\r\n    var largeSlider   = $('.large-slider');\r\n    var accordion     = $('.accordion');\r\n    var parallax      = $('.parallax');\r\n    var anchor        = new Anchor('.scroll-to-top');\r\n    var popup         = new Popup();\r\n    var orderForm     = $('#order-form');\r\n    var callbackForm  = $('#callback-form');\r\n    var Tab           = $('.tab__container');\r\n\r\n\r\n    (function() {\r\n        var scroll = $('.js-scroll-to'),\r\n            item = scroll.find('a');\r\n\r\n        item.on('click', function(){\r\n            $(this).addClass('active').siblings().removeClass('active');\r\n\r\n            $('html, body').scrollTo($(this).attr('href'), 1000, {offset: function() { return {top: -100}; }});\r\n        });\r\n    })();\r\n\r\n    if (menu.length) {\r\n        menu = new Menu(menu);\r\n    }\r\n\r\n    if (menuOpened.length) {\r\n        menuOpened = new Menu(menuOpened, {\r\n            alwaysOpen: true\r\n        });\r\n    }\r\n\r\n    if (slider.length) {\r\n        slider.each(function(index, el) {\r\n            new Slider(el);\r\n        });\r\n    }\r\n\r\n    if (sliderNarrow.length) {\r\n        sliderNarrow.each(function(index, el) {\r\n            new Slider(el);\r\n        });\r\n    }\r\n\r\n    if (largeSlider.length) {\r\n        largeSlider.find('.large-slider__slides').slick({\r\n            prevArrow: largeSlider.find('.large-slider__prev'),\r\n            nextArrow: largeSlider.find('.large-slider__next'),\r\n            slide: '.large-slide',\r\n            autoplay: true,\r\n            autoplySpeed: 7000\r\n        });\r\n    }\r\n\r\n    if (popupSlider.length) {\r\n        popupSlider.each(function(index, el) {\r\n            var $el = $(el);\r\n            $el.find('.popup-slider__slides').slick({\r\n                prevArrow: $el.find('.popup-slider__prev'),\r\n                nextArrow: $el.find('.popup-slider__next'),\r\n                autoplay: false\r\n            });\r\n        });\r\n    }\r\n\r\n    if (containerMore.length) {\r\n        containerMore.each(function(index, el) {\r\n            var button  = $(this).find('.container-more__btn');\r\n            var content = $(this).find('.container-more__content');\r\n            button.on('click', function(e) {\r\n                var text    = button.text();\r\n                var altText = button.attr('data-alt-text');\r\n                e.preventDefault();\r\n                content.slideToggle(400);\r\n                button.text(altText);\r\n                button.attr('data-alt-text', text);\r\n            });\r\n        });\r\n    }\r\n\r\n    $('.js-box').fancybox({\r\n        padding: 0,\r\n        margin: [40, 60, 20, 60],\r\n        nextEffect: 'fade',\r\n        prevEffect: 'fade',\r\n        openSpeed: 500,\r\n        closeSpeed: 300,\r\n        prevSpeed: 300,\r\n        nextSpeed: 300,\r\n        helpers: {\r\n            overlay: {\r\n                locked: false,\r\n                css: {\r\n                    background: 'rgba(12, 65, 158, 0.9)'\r\n                }\r\n            },\r\n        },\r\n        tpl: {\r\n            closeBtn: '<a title=\"Закрыть\" class=\"fancybox-item popup__close\" href=\"javascript:;\">Закрыть</a>',\r\n            next: '<a title=\"Следующий\" class=\"fancybox-nav popup-slider__next ico ico-slider-next\" href=\"javascript:;\"><span></span></a>',\r\n            prev: '<a title=\"Предыдущий\" class=\"fancybox-nav popup-slider__prev ico ico-slider-prev\" href=\"javascript:;\"><span></span></a>'\r\n        },\r\n        afterShow: function() {\r\n            var _ = this;\r\n            _.outer.swipe({\r\n                allowPageScroll: 'auto',\r\n                swipeLeft: function() {\r\n                    $.fancybox.prev();\r\n                },\r\n\r\n                swipeRight: function() {\r\n                    $.fancybox.next();\r\n                }\r\n            });\r\n        },\r\n\r\n        beforeClose: function() {\r\n            this.skin.addClass('is-close');\r\n        }\r\n    });\r\n\r\n    if (accordion.length) {\r\n        accordion.each(function(index, el) {\r\n            new Accordion(el);\r\n        });\r\n    }\r\n\r\n    $('[data-popup]').each(function() {\r\n        var $this = $(this);\r\n        $this.on('click', function(e) {\r\n            popup.open($this.data('popup'));\r\n            return false;\r\n        });\r\n    });\r\n\r\n    var validationOptions = {\r\n        debug: true,\r\n        rules: {\r\n            phone: {\r\n                minlength: 7\r\n            }\r\n        },\r\n        errorPlacement: function(error, element) {\r\n            return true;\r\n        }\r\n    };\r\n\r\n    // order form validation\r\n    if (orderForm.length) {\r\n        orderForm.validate(validationOptions);\r\n    }\r\n\r\n    // callback form validation\r\n    if (callbackForm.length) {\r\n        callbackForm.validate(validationOptions);\r\n    }\r\n\r\n    if (Tab.length) {\r\n        $('.nav').each(function(index, el) {\r\n            Tabs();\r\n        });\r\n    }\r\n\r\n    function Tabs(){\r\n        $('.nav.frm').each(function(){\r\n            var link = $(this).find('a'),\r\n                linkItem = $(this).find('li'),\r\n                index = link.data('href'),\r\n                parent = $(this).parents('.tab__container'),\r\n                tab_item = parent.find('.tab__item'),\r\n                link_cont = parent.find('.link__cont'),\r\n                slider = $('.sliders');\r\n\r\n            link.on('click', function(){\r\n                var this_ = $(this),\r\n                    index = this_.data('href');\r\n\r\n                this_.parent().addClass('active').siblings().removeClass('active');\r\n                tab_item.fadeOut(0).removeClass('visible');\r\n                parent.find(\".\"+index).fadeIn(0);\r\n                setTimeout(function(){\r\n                    parent.find(\".\"+index).addClass('visible');\r\n                },10);\r\n                return false;\r\n            });\r\n            linkItem.first().addClass('active');\r\n            parent.find(\".\"+index).show().addClass('visible');\r\n        });\r\n    };\r\n\r\n});\r\n","function Accordion(element, config) {\r\n\r\n    this.options = {\r\n        item: '.accordion__item',\r\n        btn: '.accordion__btn',\r\n        content: '.accordion__content',\r\n        activeClass: 'is-active',\r\n        speed: 300\r\n    };\r\n\r\n    $.extend(this.options, config || {});\r\n\r\n    this.$el      = element instanceof jQuery ? element : $(element);\r\n    this.$item    = this.$el.find(this.options.item);\r\n    this.$btn     = this.$el.find(this.options.btn);\r\n\r\n    this.init();\r\n\r\n}\r\n\r\nAccordion.prototype = {\r\n\r\n    constructor: Accordion,\r\n\r\n    _initEvents: function() {\r\n        var _ = this;\r\n\r\n        _.$btn.on('click', function(e) {\r\n            var btn   = $(this);\r\n            var index = btn.index();\r\n            var content = btn.siblings(_.options.content);\r\n            e.preventDefault();\r\n            btn.toggleClass(_.options.activeClass);\r\n            content.slideToggle(_.options.speed);\r\n        });\r\n    },\r\n\r\n    init: function() {\r\n        this._initEvents();\r\n    }\r\n\r\n};\r\n\r\nmodule.exports = Accordion;\r\n","function Anchor(element, config) {\r\n\r\n    var _   = this;\r\n    var win = $(window);\r\n    var scrollPos = win.scrollTop();\r\n    var defaults = {\r\n        activeClass: 'is-active',\r\n        offset: 0,\r\n        scrollDuration: 500\r\n    };\r\n\r\n    _.$el     = element instanceof jQuery ? element : $(element);\r\n    _.active  = false;\r\n    _.options = $.extend(defaults, config || {});\r\n\r\n    _.init = function() {\r\n        _.visiblePos = _.$el.offset().top - win.height() - _.options.offset;\r\n        _.updateState();\r\n    };\r\n\r\n    _.updateState = function() {\r\n        if (!_.active && scrollPos >= _.visiblePos) {\r\n            _.$el.addClass(_.options.activeClass);\r\n            _.active = true;\r\n        } else if (_.active && scrollPos < _.visiblePos) {\r\n            _.$el.removeClass(_.options.activeClass);\r\n            _.active = false;\r\n        }\r\n    };\r\n\r\n    _.$el.on('click', function() {\r\n        $('html').animate({\r\n            scrollTop: 0\r\n        }, _.options.scrollDuration);\r\n        $('body').animate({\r\n            scrollTop: 0\r\n        }, _.options.scrollDuration);\r\n    });\r\n\r\n    win.on('scroll', function() {\r\n        scrollPos = win.scrollTop();\r\n        _.updateState();\r\n    });\r\n\r\n    win.on('resize', function() {\r\n        _.init();\r\n    });\r\n\r\n    _.init();\r\n\r\n}\r\n\r\nmodule.exports = Anchor;\r\n","module.exports = function(errors) {\r\n\r\n    var errorClass = 'is-error';\r\n\r\n    $.each(errors, function(index, error) {\r\n        error.element.classList.add(errorClass);\r\n        setTimeout(function() {\r\n            error.element.classList.remove(errorClass);\r\n        }, 1500);\r\n    });\r\n\r\n};\r\n","function Menu(element, options) {\r\n\r\n    this.config = {\r\n        button: '.menu__btn',\r\n        tab: '.menu__tab',\r\n        content: '.menu__content',\r\n        activeClass: 'is-active',\r\n        openClass: 'is-open',\r\n        stickyClass: 'is-fixed',\r\n        activeTab: 0,\r\n        alwaysOpen: false,\r\n        sticky: true\r\n    };\r\n\r\n    $.extend(this.config, options || {});\r\n\r\n    // 470px - height of menu\r\n    this.config.shiftY = this.config.alwaysOpen ? 470 : 0;\r\n\r\n    this.$el       = element instanceof jQuery ? element : $(element);\r\n    this.activeTab = this.config.activeTab;\r\n    this.opened    = false;\r\n    this.isFixed   = false;\r\n\r\n    // this.opened    = this.config.alwaysOpen ? true : false;\r\n\r\n    this.init();\r\n\r\n}\r\n\r\nMenu.prototype = {\r\n\r\n    constructor: Menu,\r\n\r\n    _initEvents: function() {\r\n        var _ = this;\r\n        this.$buttons.on('click touchend', function(e) {\r\n            var btn   = $(this);\r\n            var index = $(this).index();\r\n\r\n            e.preventDefault();\r\n\r\n            if (e.type == 'touchend' && index === _.activeTab && _.opened) {\r\n                if (_.config.alwaysOpen) {\r\n                    if (_.isFixed) {\r\n                        console.log(_.isFixed);\r\n                        _.close();\r\n                    }\r\n                } else {\r\n                    _.close();\r\n                }\r\n\r\n                return;\r\n            }\r\n\r\n            if (!_.opened) {\r\n                _.toggleTabs(index);\r\n                _.open();\r\n            } else if (index !== _.activeTab) {\r\n                _.toggleTabs(index);\r\n            }\r\n\r\n        });\r\n\r\n        // this.$el.on('click', function(e) {\r\n        //     e.stopPropagation();\r\n        // });\r\n\r\n        this.$el.bind('mouseleave', function() {\r\n            if (_.opened && !_.config.alwaysOpen) {\r\n                _.close();\r\n            }\r\n\r\n            if (_.opened && _.config.alwaysOpen && _.isFixed) {\r\n                _.close();\r\n            }\r\n        });\r\n\r\n        // $(document).on('click', function(e) {\r\n        //     console.log(e);\r\n        //     if (_.opened && _.alwaysOpen && _.isFixed) {\r\n        //         _.close();\r\n        //     } else if (_.opened && !_.alwaysOpen) {\r\n        //         _.close();\r\n        //     }\r\n        // });\r\n    },\r\n\r\n    _initModEvents: function() {\r\n        var _ = this;\r\n        this.$buttons.bind('click touchend', function(e) {\r\n            var index = $(this).index();\r\n            e.preventDefault();\r\n            if (index !== _.activeTab) {\r\n                _.toggleTabs(index);\r\n            }\r\n        });\r\n    },\r\n\r\n    toggleTabs: function(index) {\r\n        var _ = this;\r\n        $(_.$buttons[_.activeTab]).removeClass(_.config.activeClass);\r\n        $(_.$buttons[index]).addClass(_.config.activeClass);\r\n        $(_.$tabs[_.activeTab]).removeClass(_.config.activeClass);\r\n        $(_.$tabs[index]).addClass(_.config.activeClass);\r\n        _.activeTab = index;\r\n    },\r\n\r\n    makeSticky: function() {\r\n        var _      = this;\r\n        var win    = $(window);\r\n        var scroll = win.scrollTop();\r\n        var scrollDirection;\r\n        var offset = _.$el.offset().top + _.config.shiftY;\r\n\r\n        win.on('scroll', function() {\r\n            var updatedScroll = win.scrollTop();\r\n            if (updatedScroll >= scroll) {\r\n                scrollDirection = 'FORVARD';\r\n            } else {\r\n                scrollDirection = 'BACKWARD';\r\n            }\r\n\r\n            scroll = win.scrollTop();\r\n\r\n            if (scrollDirection == 'FORVARD' && scroll > offset && !_.isFixed) {\r\n                _._toggleFixedPosition();\r\n            }\r\n\r\n            if (scrollDirection == 'BACKWARD' && scroll <= offset && _.isFixed) {\r\n                _._toggleFixedPosition();\r\n            }\r\n        });\r\n    },\r\n\r\n    _toggleFixedPosition: function() {\r\n        var _ = this;\r\n        if (_.config.alwaysOpen) {\r\n            if (_.isFixed) {\r\n                _.$el.removeClass(_.config.stickyClass);\r\n                _.open(0, 0);\r\n                _.isFixed = false;\r\n            } else {\r\n                _.close(0);\r\n                _.$el.css('top', -67);\r\n                _.$el.addClass(_.config.stickyClass);\r\n                _.$el.animate({top: 0}, 300, function() {\r\n                    _.$el.css('top', '');\r\n                });\r\n\r\n                _.isFixed = true;\r\n            }\r\n        } else {\r\n            if (_.isFixed) {\r\n                _.$el.removeClass(_.config.stickyClass);\r\n                _.isFixed = false;\r\n            } else {\r\n                _.$el.addClass(_.config.stickyClass);\r\n                _.close(0);\r\n                _.isFixed = true;\r\n            }\r\n        }\r\n    },\r\n\r\n    open: function(duration, index) {\r\n        if (this.opened) return;\r\n\r\n        var _        = this;\r\n        var duration = $.isNumeric(duration) ? duration : 300;\r\n\r\n        _.$content.slideDown({\r\n            duration: duration,\r\n            start: function() {\r\n                setTimeout(function() {\r\n                    _.$el.addClass(_.config.openClass);\r\n                }, 100);\r\n\r\n                if ($.isNumeric(index)) {\r\n                    _.toggleTabs(index);\r\n                }\r\n            },\r\n\r\n            complete: function() {\r\n                _.opened = true;\r\n            },\r\n        });\r\n    },\r\n\r\n    close: function(duration) {\r\n        if (!this.opened) return;\r\n\r\n        var _        = this;\r\n        var duration = $.isNumeric(duration) ? duration : 300;\r\n\r\n        _.$content.slideUp({\r\n            duration: duration,\r\n            start: function() {\r\n                setTimeout(function() {\r\n                    $(_.$buttons[_.activeTab]).removeClass(_.config.activeClass);\r\n                }, 200);\r\n            },\r\n\r\n            complete: function() {\r\n                _.$el.removeClass(_.config.openClass);\r\n                _.opened = false;\r\n            },\r\n        });\r\n    },\r\n\r\n    init: function() {\r\n        var _ = this;\r\n        _.$buttons = _.$el.find(_.config.button);\r\n        _.$tabs    = _.$el.find(_.config.tab);\r\n        _.$content = _.$el.find(_.config.content);\r\n\r\n        // if (_.config.alwaysOpen) {\r\n        //     _._initModEvents();\r\n        //     _.toggleTabs(_.activeTab);\r\n        // } else {\r\n        //     _._initEvents();\r\n        //     _.$content.slideUp();\r\n        // }\r\n\r\n        if (_.config.alwaysOpen) {\r\n            _.toggleTabs(_.activeTab);\r\n            _.open();\r\n        } else {\r\n            _.$content.slideUp();\r\n        }\r\n\r\n        _._initEvents();\r\n\r\n        if (_.config.sticky) {\r\n            _.makeSticky();\r\n        }\r\n    }\r\n\r\n};\r\n\r\nmodule.exports = Menu;\r\n","function Popup(options) {\r\n\r\n    var defaults, opt;\r\n    var _ = this;\r\n\r\n    defaults = {\r\n        duration: 300,\r\n        popupSelector: '.popup',\r\n        innerSelector: '.popup__inner',\r\n        closePopupSelector: '.js-popup-close, .popup__close',\r\n        activeClass: 'is-active',\r\n        enableEvents: true\r\n    };\r\n\r\n    _.options = opt = $.extend(defaults, options || {});\r\n\r\n    _.open = function(element) {\r\n        var popup = element instanceof jQuery ? element : $(element);\r\n\r\n        popup.fadeIn({\r\n            duration: opt.duration,\r\n            complete: function() {\r\n                popup.addClass(opt.activeClass);\r\n            }\r\n        });\r\n    };\r\n\r\n    _.close = function(element) {\r\n        var popup = element instanceof jQuery ? element : $(element);\r\n\r\n        if (!popup.hasClass(opt.activeClass)) return;\r\n\r\n        popup\r\n            .removeClass(opt.activeClass)\r\n            .delay(opt.duration)\r\n            .fadeOut({\r\n                duration: opt.duration\r\n            });\r\n    };\r\n\r\n    _.initEvents = function() {\r\n        $(opt.closePopupSelector).on('click', function(e) {\r\n            e.preventDefault();\r\n            _.close($(this).parents(opt.popupSelector));\r\n        });\r\n\r\n        $(opt.popupSelector).on('click', function() {\r\n            _.close(this);\r\n        });\r\n\r\n        $(opt.innerSelector).on('click', function(e) {\r\n            e.stopPropagation();\r\n        });\r\n    };\r\n\r\n    if (opt.enableEvents) {\r\n        _.initEvents();\r\n    }\r\n\r\n}\r\n\r\nmodule.exports = Popup;\r\n","function Slider(element, config) {\r\n\r\n    var slickOptions;\r\n\r\n    this.$el = element instanceof jQuery ? element : $(element);\r\n    this.$slider = this.$el.find('.slider__slides');\r\n\r\n    defaults = {\r\n        autoplay: true,\r\n        autoplaySpeed: 5000,\r\n        fade: false,\r\n        arrows: true,\r\n        dots: false,\r\n        slide: '.slide',\r\n        prevArrow: this.$el.find('.slider__prev'),\r\n        nextArrow: this.$el.find('.slider__next')\r\n    };\r\n\r\n    slickOptions = $.extend(defaults, config || {});\r\n\r\n    this.$slider.slick(slickOptions);\r\n\r\n    // this.init();\r\n\r\n    return this;\r\n\r\n}\r\n\r\nSlider.prototype = {\r\n\r\n    constructor: Slider,\r\n\r\n    init: function() {\r\n        console.log(this);\r\n    }\r\n\r\n};\r\n\r\nmodule.exports = Slider;\r\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvanMvbWFpbi5qcyIsInNyYy9qcy9tb2R1bGVzL2FjY29yZGlvbi5qcyIsInNyYy9qcy9tb2R1bGVzL2FuY2hvci5qcyIsInNyYy9qcy9tb2R1bGVzL2Zvcm0tZXJyb3ItaGFuZGxlci5qcyIsInNyYy9qcy9tb2R1bGVzL21lbnUuanMiLCJzcmMvanMvbW9kdWxlcy9wb3B1cC5qcyIsInNyYy9qcy9tb2R1bGVzL3NsaWRlci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDN01BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM1Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3JEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNaQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNoUEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzlEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJ2YXIgTWVudSAgICAgICAgICAgICA9IHJlcXVpcmUoJy4vbW9kdWxlcy9tZW51LmpzJyk7XHJcbnZhciBTbGlkZXIgICAgICAgICAgID0gcmVxdWlyZSgnLi9tb2R1bGVzL3NsaWRlci5qcycpO1xyXG52YXIgQWNjb3JkaW9uICAgICAgICA9IHJlcXVpcmUoJy4vbW9kdWxlcy9hY2NvcmRpb24uanMnKTtcclxudmFyIFBvcHVwICAgICAgICAgICAgPSByZXF1aXJlKCcuL21vZHVsZXMvcG9wdXAuanMnKTtcclxudmFyIEFuY2hvciAgICAgICAgICAgPSByZXF1aXJlKCcuL21vZHVsZXMvYW5jaG9yLmpzJyk7XHJcbnZhciBmb3JtRXJyb3JIYW5kbGVyID0gcmVxdWlyZSgnLi9tb2R1bGVzL2Zvcm0tZXJyb3ItaGFuZGxlci5qcycpO1xyXG5cclxuJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgdmFyIG1lbnUgICAgICAgICAgPSAkKCcubWVudTpub3QoLm1lbnVfb3BlbmVkKTpub3QoLm1lbnVfY2F0YWxvZyknKTtcclxuICAgIHZhciBzbGlkZXIgICAgICAgID0gJCgnLnNsaWRlcjpub3QoLnNsaWRlcl9uYXJyb3cpJyk7XHJcbiAgICB2YXIgc2xpZGVyTmFycm93ICA9ICQoJy5zbGlkZXIuc2xpZGVyX25hcnJvdycpO1xyXG4gICAgdmFyIHBvcHVwU2xpZGVyICAgPSAkKCcucG9wdXAtc2xpZGVyJyk7XHJcbiAgICB2YXIgbWVudU9wZW5lZCAgICA9ICQoJy5tZW51Lm1lbnVfb3BlbmVkJyk7XHJcbiAgICB2YXIgY29udGFpbmVyTW9yZSA9ICQoJy5jb250YWluZXItbW9yZScpO1xyXG4gICAgdmFyIGxhcmdlU2xpZGVyICAgPSAkKCcubGFyZ2Utc2xpZGVyJyk7XHJcbiAgICB2YXIgYWNjb3JkaW9uICAgICA9ICQoJy5hY2NvcmRpb24nKTtcclxuICAgIHZhciBwYXJhbGxheCAgICAgID0gJCgnLnBhcmFsbGF4Jyk7XHJcbiAgICB2YXIgYW5jaG9yICAgICAgICA9IG5ldyBBbmNob3IoJy5zY3JvbGwtdG8tdG9wJyk7XHJcbiAgICB2YXIgcG9wdXAgICAgICAgICA9IG5ldyBQb3B1cCgpO1xyXG4gICAgdmFyIG9yZGVyRm9ybSAgICAgPSAkKCcjb3JkZXItZm9ybScpO1xyXG4gICAgdmFyIGNhbGxiYWNrRm9ybSAgPSAkKCcjY2FsbGJhY2stZm9ybScpO1xyXG4gICAgdmFyIFRhYiAgICAgICAgICAgPSAkKCcudGFiX19jb250YWluZXInKTtcclxuXHJcblxyXG4gICAgKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHZhciBzY3JvbGwgPSAkKCcuanMtc2Nyb2xsLXRvJyksXHJcbiAgICAgICAgICAgIGl0ZW0gPSBzY3JvbGwuZmluZCgnYScpO1xyXG5cclxuICAgICAgICBpdGVtLm9uKCdjbGljaycsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2FjdGl2ZScpLnNpYmxpbmdzKCkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG5cclxuICAgICAgICAgICAgJCgnaHRtbCwgYm9keScpLnNjcm9sbFRvKCQodGhpcykuYXR0cignaHJlZicpLCAxMDAwLCB7b2Zmc2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIHt0b3A6IC0xMDB9OyB9fSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KSgpO1xyXG5cclxuICAgIGlmIChtZW51Lmxlbmd0aCkge1xyXG4gICAgICAgIG1lbnUgPSBuZXcgTWVudShtZW51KTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAobWVudU9wZW5lZC5sZW5ndGgpIHtcclxuICAgICAgICBtZW51T3BlbmVkID0gbmV3IE1lbnUobWVudU9wZW5lZCwge1xyXG4gICAgICAgICAgICBhbHdheXNPcGVuOiB0cnVlXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHNsaWRlci5sZW5ndGgpIHtcclxuICAgICAgICBzbGlkZXIuZWFjaChmdW5jdGlvbihpbmRleCwgZWwpIHtcclxuICAgICAgICAgICAgbmV3IFNsaWRlcihlbCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHNsaWRlck5hcnJvdy5sZW5ndGgpIHtcclxuICAgICAgICBzbGlkZXJOYXJyb3cuZWFjaChmdW5jdGlvbihpbmRleCwgZWwpIHtcclxuICAgICAgICAgICAgbmV3IFNsaWRlcihlbCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGxhcmdlU2xpZGVyLmxlbmd0aCkge1xyXG4gICAgICAgIGxhcmdlU2xpZGVyLmZpbmQoJy5sYXJnZS1zbGlkZXJfX3NsaWRlcycpLnNsaWNrKHtcclxuICAgICAgICAgICAgcHJldkFycm93OiBsYXJnZVNsaWRlci5maW5kKCcubGFyZ2Utc2xpZGVyX19wcmV2JyksXHJcbiAgICAgICAgICAgIG5leHRBcnJvdzogbGFyZ2VTbGlkZXIuZmluZCgnLmxhcmdlLXNsaWRlcl9fbmV4dCcpLFxyXG4gICAgICAgICAgICBzbGlkZTogJy5sYXJnZS1zbGlkZScsXHJcbiAgICAgICAgICAgIGF1dG9wbGF5OiB0cnVlLFxyXG4gICAgICAgICAgICBhdXRvcGx5U3BlZWQ6IDcwMDBcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAocG9wdXBTbGlkZXIubGVuZ3RoKSB7XHJcbiAgICAgICAgcG9wdXBTbGlkZXIuZWFjaChmdW5jdGlvbihpbmRleCwgZWwpIHtcclxuICAgICAgICAgICAgdmFyICRlbCA9ICQoZWwpO1xyXG4gICAgICAgICAgICAkZWwuZmluZCgnLnBvcHVwLXNsaWRlcl9fc2xpZGVzJykuc2xpY2soe1xyXG4gICAgICAgICAgICAgICAgcHJldkFycm93OiAkZWwuZmluZCgnLnBvcHVwLXNsaWRlcl9fcHJldicpLFxyXG4gICAgICAgICAgICAgICAgbmV4dEFycm93OiAkZWwuZmluZCgnLnBvcHVwLXNsaWRlcl9fbmV4dCcpLFxyXG4gICAgICAgICAgICAgICAgYXV0b3BsYXk6IGZhbHNlXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChjb250YWluZXJNb3JlLmxlbmd0aCkge1xyXG4gICAgICAgIGNvbnRhaW5lck1vcmUuZWFjaChmdW5jdGlvbihpbmRleCwgZWwpIHtcclxuICAgICAgICAgICAgdmFyIGJ1dHRvbiAgPSAkKHRoaXMpLmZpbmQoJy5jb250YWluZXItbW9yZV9fYnRuJyk7XHJcbiAgICAgICAgICAgIHZhciBjb250ZW50ID0gJCh0aGlzKS5maW5kKCcuY29udGFpbmVyLW1vcmVfX2NvbnRlbnQnKTtcclxuICAgICAgICAgICAgYnV0dG9uLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgICAgIHZhciB0ZXh0ICAgID0gYnV0dG9uLnRleHQoKTtcclxuICAgICAgICAgICAgICAgIHZhciBhbHRUZXh0ID0gYnV0dG9uLmF0dHIoJ2RhdGEtYWx0LXRleHQnKTtcclxuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgIGNvbnRlbnQuc2xpZGVUb2dnbGUoNDAwKTtcclxuICAgICAgICAgICAgICAgIGJ1dHRvbi50ZXh0KGFsdFRleHQpO1xyXG4gICAgICAgICAgICAgICAgYnV0dG9uLmF0dHIoJ2RhdGEtYWx0LXRleHQnLCB0ZXh0KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgJCgnLmpzLWJveCcpLmZhbmN5Ym94KHtcclxuICAgICAgICBwYWRkaW5nOiAwLFxyXG4gICAgICAgIG1hcmdpbjogWzQwLCA2MCwgMjAsIDYwXSxcclxuICAgICAgICBuZXh0RWZmZWN0OiAnZmFkZScsXHJcbiAgICAgICAgcHJldkVmZmVjdDogJ2ZhZGUnLFxyXG4gICAgICAgIG9wZW5TcGVlZDogNTAwLFxyXG4gICAgICAgIGNsb3NlU3BlZWQ6IDMwMCxcclxuICAgICAgICBwcmV2U3BlZWQ6IDMwMCxcclxuICAgICAgICBuZXh0U3BlZWQ6IDMwMCxcclxuICAgICAgICBoZWxwZXJzOiB7XHJcbiAgICAgICAgICAgIG92ZXJsYXk6IHtcclxuICAgICAgICAgICAgICAgIGxvY2tlZDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBjc3M6IHtcclxuICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiAncmdiYSgxMiwgNjUsIDE1OCwgMC45KSdcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9LFxyXG4gICAgICAgIHRwbDoge1xyXG4gICAgICAgICAgICBjbG9zZUJ0bjogJzxhIHRpdGxlPVwi0JfQsNC60YDRi9GC0YxcIiBjbGFzcz1cImZhbmN5Ym94LWl0ZW0gcG9wdXBfX2Nsb3NlXCIgaHJlZj1cImphdmFzY3JpcHQ6O1wiPtCX0LDQutGA0YvRgtGMPC9hPicsXHJcbiAgICAgICAgICAgIG5leHQ6ICc8YSB0aXRsZT1cItCh0LvQtdC00YPRjtGJ0LjQuVwiIGNsYXNzPVwiZmFuY3lib3gtbmF2IHBvcHVwLXNsaWRlcl9fbmV4dCBpY28gaWNvLXNsaWRlci1uZXh0XCIgaHJlZj1cImphdmFzY3JpcHQ6O1wiPjxzcGFuPjwvc3Bhbj48L2E+JyxcclxuICAgICAgICAgICAgcHJldjogJzxhIHRpdGxlPVwi0J/RgNC10LTRi9C00YPRidC40LlcIiBjbGFzcz1cImZhbmN5Ym94LW5hdiBwb3B1cC1zbGlkZXJfX3ByZXYgaWNvIGljby1zbGlkZXItcHJldlwiIGhyZWY9XCJqYXZhc2NyaXB0OjtcIj48c3Bhbj48L3NwYW4+PC9hPidcclxuICAgICAgICB9LFxyXG4gICAgICAgIGFmdGVyU2hvdzogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHZhciBfID0gdGhpcztcclxuICAgICAgICAgICAgXy5vdXRlci5zd2lwZSh7XHJcbiAgICAgICAgICAgICAgICBhbGxvd1BhZ2VTY3JvbGw6ICdhdXRvJyxcclxuICAgICAgICAgICAgICAgIHN3aXBlTGVmdDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJC5mYW5jeWJveC5wcmV2KCk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgICAgIHN3aXBlUmlnaHQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICQuZmFuY3lib3gubmV4dCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBiZWZvcmVDbG9zZTogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2tpbi5hZGRDbGFzcygnaXMtY2xvc2UnKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBpZiAoYWNjb3JkaW9uLmxlbmd0aCkge1xyXG4gICAgICAgIGFjY29yZGlvbi5lYWNoKGZ1bmN0aW9uKGluZGV4LCBlbCkge1xyXG4gICAgICAgICAgICBuZXcgQWNjb3JkaW9uKGVsKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAkKCdbZGF0YS1wb3B1cF0nKS5lYWNoKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHZhciAkdGhpcyA9ICQodGhpcyk7XHJcbiAgICAgICAgJHRoaXMub24oJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICBwb3B1cC5vcGVuKCR0aGlzLmRhdGEoJ3BvcHVwJykpO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB2YXIgdmFsaWRhdGlvbk9wdGlvbnMgPSB7XHJcbiAgICAgICAgZGVidWc6IHRydWUsXHJcbiAgICAgICAgcnVsZXM6IHtcclxuICAgICAgICAgICAgcGhvbmU6IHtcclxuICAgICAgICAgICAgICAgIG1pbmxlbmd0aDogN1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlcnJvclBsYWNlbWVudDogZnVuY3Rpb24oZXJyb3IsIGVsZW1lbnQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvLyBvcmRlciBmb3JtIHZhbGlkYXRpb25cclxuICAgIGlmIChvcmRlckZvcm0ubGVuZ3RoKSB7XHJcbiAgICAgICAgb3JkZXJGb3JtLnZhbGlkYXRlKHZhbGlkYXRpb25PcHRpb25zKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBjYWxsYmFjayBmb3JtIHZhbGlkYXRpb25cclxuICAgIGlmIChjYWxsYmFja0Zvcm0ubGVuZ3RoKSB7XHJcbiAgICAgICAgY2FsbGJhY2tGb3JtLnZhbGlkYXRlKHZhbGlkYXRpb25PcHRpb25zKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoVGFiLmxlbmd0aCkge1xyXG4gICAgICAgICQoJy5uYXYnKS5lYWNoKGZ1bmN0aW9uKGluZGV4LCBlbCkge1xyXG4gICAgICAgICAgICBUYWJzKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gVGFicygpe1xyXG4gICAgICAgICQoJy5uYXYuZnJtJykuZWFjaChmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICB2YXIgbGluayA9ICQodGhpcykuZmluZCgnYScpLFxyXG4gICAgICAgICAgICAgICAgbGlua0l0ZW0gPSAkKHRoaXMpLmZpbmQoJ2xpJyksXHJcbiAgICAgICAgICAgICAgICBpbmRleCA9IGxpbmsuZGF0YSgnaHJlZicpLFxyXG4gICAgICAgICAgICAgICAgcGFyZW50ID0gJCh0aGlzKS5wYXJlbnRzKCcudGFiX19jb250YWluZXInKSxcclxuICAgICAgICAgICAgICAgIHRhYl9pdGVtID0gcGFyZW50LmZpbmQoJy50YWJfX2l0ZW0nKSxcclxuICAgICAgICAgICAgICAgIGxpbmtfY29udCA9IHBhcmVudC5maW5kKCcubGlua19fY29udCcpLFxyXG4gICAgICAgICAgICAgICAgc2xpZGVyID0gJCgnLnNsaWRlcnMnKTtcclxuXHJcbiAgICAgICAgICAgIGxpbmsub24oJ2NsaWNrJywgZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgIHZhciB0aGlzXyA9ICQodGhpcyksXHJcbiAgICAgICAgICAgICAgICAgICAgaW5kZXggPSB0aGlzXy5kYXRhKCdocmVmJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpc18ucGFyZW50KCkuYWRkQ2xhc3MoJ2FjdGl2ZScpLnNpYmxpbmdzKCkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgdGFiX2l0ZW0uZmFkZU91dCgwKS5yZW1vdmVDbGFzcygndmlzaWJsZScpO1xyXG4gICAgICAgICAgICAgICAgcGFyZW50LmZpbmQoXCIuXCIraW5kZXgpLmZhZGVJbigwKTtcclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQuZmluZChcIi5cIitpbmRleCkuYWRkQ2xhc3MoJ3Zpc2libGUnKTtcclxuICAgICAgICAgICAgICAgIH0sMTApO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgbGlua0l0ZW0uZmlyc3QoKS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgIHBhcmVudC5maW5kKFwiLlwiK2luZGV4KS5zaG93KCkuYWRkQ2xhc3MoJ3Zpc2libGUnKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG59KTtcclxuIiwiZnVuY3Rpb24gQWNjb3JkaW9uKGVsZW1lbnQsIGNvbmZpZykge1xyXG5cclxuICAgIHRoaXMub3B0aW9ucyA9IHtcclxuICAgICAgICBpdGVtOiAnLmFjY29yZGlvbl9faXRlbScsXHJcbiAgICAgICAgYnRuOiAnLmFjY29yZGlvbl9fYnRuJyxcclxuICAgICAgICBjb250ZW50OiAnLmFjY29yZGlvbl9fY29udGVudCcsXHJcbiAgICAgICAgYWN0aXZlQ2xhc3M6ICdpcy1hY3RpdmUnLFxyXG4gICAgICAgIHNwZWVkOiAzMDBcclxuICAgIH07XHJcblxyXG4gICAgJC5leHRlbmQodGhpcy5vcHRpb25zLCBjb25maWcgfHwge30pO1xyXG5cclxuICAgIHRoaXMuJGVsICAgICAgPSBlbGVtZW50IGluc3RhbmNlb2YgalF1ZXJ5ID8gZWxlbWVudCA6ICQoZWxlbWVudCk7XHJcbiAgICB0aGlzLiRpdGVtICAgID0gdGhpcy4kZWwuZmluZCh0aGlzLm9wdGlvbnMuaXRlbSk7XHJcbiAgICB0aGlzLiRidG4gICAgID0gdGhpcy4kZWwuZmluZCh0aGlzLm9wdGlvbnMuYnRuKTtcclxuXHJcbiAgICB0aGlzLmluaXQoKTtcclxuXHJcbn1cclxuXHJcbkFjY29yZGlvbi5wcm90b3R5cGUgPSB7XHJcblxyXG4gICAgY29uc3RydWN0b3I6IEFjY29yZGlvbixcclxuXHJcbiAgICBfaW5pdEV2ZW50czogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIF8gPSB0aGlzO1xyXG5cclxuICAgICAgICBfLiRidG4ub24oJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICB2YXIgYnRuICAgPSAkKHRoaXMpO1xyXG4gICAgICAgICAgICB2YXIgaW5kZXggPSBidG4uaW5kZXgoKTtcclxuICAgICAgICAgICAgdmFyIGNvbnRlbnQgPSBidG4uc2libGluZ3MoXy5vcHRpb25zLmNvbnRlbnQpO1xyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIGJ0bi50b2dnbGVDbGFzcyhfLm9wdGlvbnMuYWN0aXZlQ2xhc3MpO1xyXG4gICAgICAgICAgICBjb250ZW50LnNsaWRlVG9nZ2xlKF8ub3B0aW9ucy5zcGVlZCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9LFxyXG5cclxuICAgIGluaXQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHRoaXMuX2luaXRFdmVudHMoKTtcclxuICAgIH1cclxuXHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IEFjY29yZGlvbjtcclxuIiwiZnVuY3Rpb24gQW5jaG9yKGVsZW1lbnQsIGNvbmZpZykge1xyXG5cclxuICAgIHZhciBfICAgPSB0aGlzO1xyXG4gICAgdmFyIHdpbiA9ICQod2luZG93KTtcclxuICAgIHZhciBzY3JvbGxQb3MgPSB3aW4uc2Nyb2xsVG9wKCk7XHJcbiAgICB2YXIgZGVmYXVsdHMgPSB7XHJcbiAgICAgICAgYWN0aXZlQ2xhc3M6ICdpcy1hY3RpdmUnLFxyXG4gICAgICAgIG9mZnNldDogMCxcclxuICAgICAgICBzY3JvbGxEdXJhdGlvbjogNTAwXHJcbiAgICB9O1xyXG5cclxuICAgIF8uJGVsICAgICA9IGVsZW1lbnQgaW5zdGFuY2VvZiBqUXVlcnkgPyBlbGVtZW50IDogJChlbGVtZW50KTtcclxuICAgIF8uYWN0aXZlICA9IGZhbHNlO1xyXG4gICAgXy5vcHRpb25zID0gJC5leHRlbmQoZGVmYXVsdHMsIGNvbmZpZyB8fCB7fSk7XHJcblxyXG4gICAgXy5pbml0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgXy52aXNpYmxlUG9zID0gXy4kZWwub2Zmc2V0KCkudG9wIC0gd2luLmhlaWdodCgpIC0gXy5vcHRpb25zLm9mZnNldDtcclxuICAgICAgICBfLnVwZGF0ZVN0YXRlKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIF8udXBkYXRlU3RhdGUgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICBpZiAoIV8uYWN0aXZlICYmIHNjcm9sbFBvcyA+PSBfLnZpc2libGVQb3MpIHtcclxuICAgICAgICAgICAgXy4kZWwuYWRkQ2xhc3MoXy5vcHRpb25zLmFjdGl2ZUNsYXNzKTtcclxuICAgICAgICAgICAgXy5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoXy5hY3RpdmUgJiYgc2Nyb2xsUG9zIDwgXy52aXNpYmxlUG9zKSB7XHJcbiAgICAgICAgICAgIF8uJGVsLnJlbW92ZUNsYXNzKF8ub3B0aW9ucy5hY3RpdmVDbGFzcyk7XHJcbiAgICAgICAgICAgIF8uYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBfLiRlbC5vbignY2xpY2snLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAkKCdodG1sJykuYW5pbWF0ZSh7XHJcbiAgICAgICAgICAgIHNjcm9sbFRvcDogMFxyXG4gICAgICAgIH0sIF8ub3B0aW9ucy5zY3JvbGxEdXJhdGlvbik7XHJcbiAgICAgICAgJCgnYm9keScpLmFuaW1hdGUoe1xyXG4gICAgICAgICAgICBzY3JvbGxUb3A6IDBcclxuICAgICAgICB9LCBfLm9wdGlvbnMuc2Nyb2xsRHVyYXRpb24pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgd2luLm9uKCdzY3JvbGwnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICBzY3JvbGxQb3MgPSB3aW4uc2Nyb2xsVG9wKCk7XHJcbiAgICAgICAgXy51cGRhdGVTdGF0ZSgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgd2luLm9uKCdyZXNpemUnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICBfLmluaXQoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIF8uaW5pdCgpO1xyXG5cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBBbmNob3I7XHJcbiIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oZXJyb3JzKSB7XHJcblxyXG4gICAgdmFyIGVycm9yQ2xhc3MgPSAnaXMtZXJyb3InO1xyXG5cclxuICAgICQuZWFjaChlcnJvcnMsIGZ1bmN0aW9uKGluZGV4LCBlcnJvcikge1xyXG4gICAgICAgIGVycm9yLmVsZW1lbnQuY2xhc3NMaXN0LmFkZChlcnJvckNsYXNzKTtcclxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBlcnJvci5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoZXJyb3JDbGFzcyk7XHJcbiAgICAgICAgfSwgMTUwMCk7XHJcbiAgICB9KTtcclxuXHJcbn07XHJcbiIsImZ1bmN0aW9uIE1lbnUoZWxlbWVudCwgb3B0aW9ucykge1xyXG5cclxuICAgIHRoaXMuY29uZmlnID0ge1xyXG4gICAgICAgIGJ1dHRvbjogJy5tZW51X19idG4nLFxyXG4gICAgICAgIHRhYjogJy5tZW51X190YWInLFxyXG4gICAgICAgIGNvbnRlbnQ6ICcubWVudV9fY29udGVudCcsXHJcbiAgICAgICAgYWN0aXZlQ2xhc3M6ICdpcy1hY3RpdmUnLFxyXG4gICAgICAgIG9wZW5DbGFzczogJ2lzLW9wZW4nLFxyXG4gICAgICAgIHN0aWNreUNsYXNzOiAnaXMtZml4ZWQnLFxyXG4gICAgICAgIGFjdGl2ZVRhYjogMCxcclxuICAgICAgICBhbHdheXNPcGVuOiBmYWxzZSxcclxuICAgICAgICBzdGlja3k6IHRydWVcclxuICAgIH07XHJcblxyXG4gICAgJC5leHRlbmQodGhpcy5jb25maWcsIG9wdGlvbnMgfHwge30pO1xyXG5cclxuICAgIC8vIDQ3MHB4IC0gaGVpZ2h0IG9mIG1lbnVcclxuICAgIHRoaXMuY29uZmlnLnNoaWZ0WSA9IHRoaXMuY29uZmlnLmFsd2F5c09wZW4gPyA0NzAgOiAwO1xyXG5cclxuICAgIHRoaXMuJGVsICAgICAgID0gZWxlbWVudCBpbnN0YW5jZW9mIGpRdWVyeSA/IGVsZW1lbnQgOiAkKGVsZW1lbnQpO1xyXG4gICAgdGhpcy5hY3RpdmVUYWIgPSB0aGlzLmNvbmZpZy5hY3RpdmVUYWI7XHJcbiAgICB0aGlzLm9wZW5lZCAgICA9IGZhbHNlO1xyXG4gICAgdGhpcy5pc0ZpeGVkICAgPSBmYWxzZTtcclxuXHJcbiAgICAvLyB0aGlzLm9wZW5lZCAgICA9IHRoaXMuY29uZmlnLmFsd2F5c09wZW4gPyB0cnVlIDogZmFsc2U7XHJcblxyXG4gICAgdGhpcy5pbml0KCk7XHJcblxyXG59XHJcblxyXG5NZW51LnByb3RvdHlwZSA9IHtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcjogTWVudSxcclxuXHJcbiAgICBfaW5pdEV2ZW50czogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIF8gPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuJGJ1dHRvbnMub24oJ2NsaWNrIHRvdWNoZW5kJywgZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICB2YXIgYnRuICAgPSAkKHRoaXMpO1xyXG4gICAgICAgICAgICB2YXIgaW5kZXggPSAkKHRoaXMpLmluZGV4KCk7XHJcblxyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoZS50eXBlID09ICd0b3VjaGVuZCcgJiYgaW5kZXggPT09IF8uYWN0aXZlVGFiICYmIF8ub3BlbmVkKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoXy5jb25maWcuYWx3YXlzT3Blbikge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChfLmlzRml4ZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXy5pc0ZpeGVkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXy5jbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgXy5jbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKCFfLm9wZW5lZCkge1xyXG4gICAgICAgICAgICAgICAgXy50b2dnbGVUYWJzKGluZGV4KTtcclxuICAgICAgICAgICAgICAgIF8ub3BlbigpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGluZGV4ICE9PSBfLmFjdGl2ZVRhYikge1xyXG4gICAgICAgICAgICAgICAgXy50b2dnbGVUYWJzKGluZGV4KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gdGhpcy4kZWwub24oJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xyXG4gICAgICAgIC8vICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIC8vIH0pO1xyXG5cclxuICAgICAgICB0aGlzLiRlbC5iaW5kKCdtb3VzZWxlYXZlJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGlmIChfLm9wZW5lZCAmJiAhXy5jb25maWcuYWx3YXlzT3Blbikge1xyXG4gICAgICAgICAgICAgICAgXy5jbG9zZSgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoXy5vcGVuZWQgJiYgXy5jb25maWcuYWx3YXlzT3BlbiAmJiBfLmlzRml4ZWQpIHtcclxuICAgICAgICAgICAgICAgIF8uY2xvc2UoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyAkKGRvY3VtZW50KS5vbignY2xpY2snLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgLy8gICAgIGNvbnNvbGUubG9nKGUpO1xyXG4gICAgICAgIC8vICAgICBpZiAoXy5vcGVuZWQgJiYgXy5hbHdheXNPcGVuICYmIF8uaXNGaXhlZCkge1xyXG4gICAgICAgIC8vICAgICAgICAgXy5jbG9zZSgpO1xyXG4gICAgICAgIC8vICAgICB9IGVsc2UgaWYgKF8ub3BlbmVkICYmICFfLmFsd2F5c09wZW4pIHtcclxuICAgICAgICAvLyAgICAgICAgIF8uY2xvc2UoKTtcclxuICAgICAgICAvLyAgICAgfVxyXG4gICAgICAgIC8vIH0pO1xyXG4gICAgfSxcclxuXHJcbiAgICBfaW5pdE1vZEV2ZW50czogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIF8gPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuJGJ1dHRvbnMuYmluZCgnY2xpY2sgdG91Y2hlbmQnLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgIHZhciBpbmRleCA9ICQodGhpcykuaW5kZXgoKTtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICBpZiAoaW5kZXggIT09IF8uYWN0aXZlVGFiKSB7XHJcbiAgICAgICAgICAgICAgICBfLnRvZ2dsZVRhYnMoaW5kZXgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9LFxyXG5cclxuICAgIHRvZ2dsZVRhYnM6IGZ1bmN0aW9uKGluZGV4KSB7XHJcbiAgICAgICAgdmFyIF8gPSB0aGlzO1xyXG4gICAgICAgICQoXy4kYnV0dG9uc1tfLmFjdGl2ZVRhYl0pLnJlbW92ZUNsYXNzKF8uY29uZmlnLmFjdGl2ZUNsYXNzKTtcclxuICAgICAgICAkKF8uJGJ1dHRvbnNbaW5kZXhdKS5hZGRDbGFzcyhfLmNvbmZpZy5hY3RpdmVDbGFzcyk7XHJcbiAgICAgICAgJChfLiR0YWJzW18uYWN0aXZlVGFiXSkucmVtb3ZlQ2xhc3MoXy5jb25maWcuYWN0aXZlQ2xhc3MpO1xyXG4gICAgICAgICQoXy4kdGFic1tpbmRleF0pLmFkZENsYXNzKF8uY29uZmlnLmFjdGl2ZUNsYXNzKTtcclxuICAgICAgICBfLmFjdGl2ZVRhYiA9IGluZGV4O1xyXG4gICAgfSxcclxuXHJcbiAgICBtYWtlU3RpY2t5OiBmdW5jdGlvbigpIHtcclxuICAgICAgICB2YXIgXyAgICAgID0gdGhpcztcclxuICAgICAgICB2YXIgd2luICAgID0gJCh3aW5kb3cpO1xyXG4gICAgICAgIHZhciBzY3JvbGwgPSB3aW4uc2Nyb2xsVG9wKCk7XHJcbiAgICAgICAgdmFyIHNjcm9sbERpcmVjdGlvbjtcclxuICAgICAgICB2YXIgb2Zmc2V0ID0gXy4kZWwub2Zmc2V0KCkudG9wICsgXy5jb25maWcuc2hpZnRZO1xyXG5cclxuICAgICAgICB3aW4ub24oJ3Njcm9sbCcsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB2YXIgdXBkYXRlZFNjcm9sbCA9IHdpbi5zY3JvbGxUb3AoKTtcclxuICAgICAgICAgICAgaWYgKHVwZGF0ZWRTY3JvbGwgPj0gc2Nyb2xsKSB7XHJcbiAgICAgICAgICAgICAgICBzY3JvbGxEaXJlY3Rpb24gPSAnRk9SVkFSRCc7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBzY3JvbGxEaXJlY3Rpb24gPSAnQkFDS1dBUkQnO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBzY3JvbGwgPSB3aW4uc2Nyb2xsVG9wKCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoc2Nyb2xsRGlyZWN0aW9uID09ICdGT1JWQVJEJyAmJiBzY3JvbGwgPiBvZmZzZXQgJiYgIV8uaXNGaXhlZCkge1xyXG4gICAgICAgICAgICAgICAgXy5fdG9nZ2xlRml4ZWRQb3NpdGlvbigpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoc2Nyb2xsRGlyZWN0aW9uID09ICdCQUNLV0FSRCcgJiYgc2Nyb2xsIDw9IG9mZnNldCAmJiBfLmlzRml4ZWQpIHtcclxuICAgICAgICAgICAgICAgIF8uX3RvZ2dsZUZpeGVkUG9zaXRpb24oKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSxcclxuXHJcbiAgICBfdG9nZ2xlRml4ZWRQb3NpdGlvbjogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIF8gPSB0aGlzO1xyXG4gICAgICAgIGlmIChfLmNvbmZpZy5hbHdheXNPcGVuKSB7XHJcbiAgICAgICAgICAgIGlmIChfLmlzRml4ZWQpIHtcclxuICAgICAgICAgICAgICAgIF8uJGVsLnJlbW92ZUNsYXNzKF8uY29uZmlnLnN0aWNreUNsYXNzKTtcclxuICAgICAgICAgICAgICAgIF8ub3BlbigwLCAwKTtcclxuICAgICAgICAgICAgICAgIF8uaXNGaXhlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgXy5jbG9zZSgwKTtcclxuICAgICAgICAgICAgICAgIF8uJGVsLmNzcygndG9wJywgLTY3KTtcclxuICAgICAgICAgICAgICAgIF8uJGVsLmFkZENsYXNzKF8uY29uZmlnLnN0aWNreUNsYXNzKTtcclxuICAgICAgICAgICAgICAgIF8uJGVsLmFuaW1hdGUoe3RvcDogMH0sIDMwMCwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgXy4kZWwuY3NzKCd0b3AnLCAnJyk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBfLmlzRml4ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKF8uaXNGaXhlZCkge1xyXG4gICAgICAgICAgICAgICAgXy4kZWwucmVtb3ZlQ2xhc3MoXy5jb25maWcuc3RpY2t5Q2xhc3MpO1xyXG4gICAgICAgICAgICAgICAgXy5pc0ZpeGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBfLiRlbC5hZGRDbGFzcyhfLmNvbmZpZy5zdGlja3lDbGFzcyk7XHJcbiAgICAgICAgICAgICAgICBfLmNsb3NlKDApO1xyXG4gICAgICAgICAgICAgICAgXy5pc0ZpeGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgb3BlbjogZnVuY3Rpb24oZHVyYXRpb24sIGluZGV4KSB7XHJcbiAgICAgICAgaWYgKHRoaXMub3BlbmVkKSByZXR1cm47XHJcblxyXG4gICAgICAgIHZhciBfICAgICAgICA9IHRoaXM7XHJcbiAgICAgICAgdmFyIGR1cmF0aW9uID0gJC5pc051bWVyaWMoZHVyYXRpb24pID8gZHVyYXRpb24gOiAzMDA7XHJcblxyXG4gICAgICAgIF8uJGNvbnRlbnQuc2xpZGVEb3duKHtcclxuICAgICAgICAgICAgZHVyYXRpb246IGR1cmF0aW9uLFxyXG4gICAgICAgICAgICBzdGFydDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIF8uJGVsLmFkZENsYXNzKF8uY29uZmlnLm9wZW5DbGFzcyk7XHJcbiAgICAgICAgICAgICAgICB9LCAxMDApO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICgkLmlzTnVtZXJpYyhpbmRleCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBfLnRvZ2dsZVRhYnMoaW5kZXgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgXy5vcGVuZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH0pO1xyXG4gICAgfSxcclxuXHJcbiAgICBjbG9zZTogZnVuY3Rpb24oZHVyYXRpb24pIHtcclxuICAgICAgICBpZiAoIXRoaXMub3BlbmVkKSByZXR1cm47XHJcblxyXG4gICAgICAgIHZhciBfICAgICAgICA9IHRoaXM7XHJcbiAgICAgICAgdmFyIGR1cmF0aW9uID0gJC5pc051bWVyaWMoZHVyYXRpb24pID8gZHVyYXRpb24gOiAzMDA7XHJcblxyXG4gICAgICAgIF8uJGNvbnRlbnQuc2xpZGVVcCh7XHJcbiAgICAgICAgICAgIGR1cmF0aW9uOiBkdXJhdGlvbixcclxuICAgICAgICAgICAgc3RhcnQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAkKF8uJGJ1dHRvbnNbXy5hY3RpdmVUYWJdKS5yZW1vdmVDbGFzcyhfLmNvbmZpZy5hY3RpdmVDbGFzcyk7XHJcbiAgICAgICAgICAgICAgICB9LCAyMDApO1xyXG4gICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgXy4kZWwucmVtb3ZlQ2xhc3MoXy5jb25maWcub3BlbkNsYXNzKTtcclxuICAgICAgICAgICAgICAgIF8ub3BlbmVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfSk7XHJcbiAgICB9LFxyXG5cclxuICAgIGluaXQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHZhciBfID0gdGhpcztcclxuICAgICAgICBfLiRidXR0b25zID0gXy4kZWwuZmluZChfLmNvbmZpZy5idXR0b24pO1xyXG4gICAgICAgIF8uJHRhYnMgICAgPSBfLiRlbC5maW5kKF8uY29uZmlnLnRhYik7XHJcbiAgICAgICAgXy4kY29udGVudCA9IF8uJGVsLmZpbmQoXy5jb25maWcuY29udGVudCk7XHJcblxyXG4gICAgICAgIC8vIGlmIChfLmNvbmZpZy5hbHdheXNPcGVuKSB7XHJcbiAgICAgICAgLy8gICAgIF8uX2luaXRNb2RFdmVudHMoKTtcclxuICAgICAgICAvLyAgICAgXy50b2dnbGVUYWJzKF8uYWN0aXZlVGFiKTtcclxuICAgICAgICAvLyB9IGVsc2Uge1xyXG4gICAgICAgIC8vICAgICBfLl9pbml0RXZlbnRzKCk7XHJcbiAgICAgICAgLy8gICAgIF8uJGNvbnRlbnQuc2xpZGVVcCgpO1xyXG4gICAgICAgIC8vIH1cclxuXHJcbiAgICAgICAgaWYgKF8uY29uZmlnLmFsd2F5c09wZW4pIHtcclxuICAgICAgICAgICAgXy50b2dnbGVUYWJzKF8uYWN0aXZlVGFiKTtcclxuICAgICAgICAgICAgXy5vcGVuKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgXy4kY29udGVudC5zbGlkZVVwKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBfLl9pbml0RXZlbnRzKCk7XHJcblxyXG4gICAgICAgIGlmIChfLmNvbmZpZy5zdGlja3kpIHtcclxuICAgICAgICAgICAgXy5tYWtlU3RpY2t5KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gTWVudTtcclxuIiwiZnVuY3Rpb24gUG9wdXAob3B0aW9ucykge1xyXG5cclxuICAgIHZhciBkZWZhdWx0cywgb3B0O1xyXG4gICAgdmFyIF8gPSB0aGlzO1xyXG5cclxuICAgIGRlZmF1bHRzID0ge1xyXG4gICAgICAgIGR1cmF0aW9uOiAzMDAsXHJcbiAgICAgICAgcG9wdXBTZWxlY3RvcjogJy5wb3B1cCcsXHJcbiAgICAgICAgaW5uZXJTZWxlY3RvcjogJy5wb3B1cF9faW5uZXInLFxyXG4gICAgICAgIGNsb3NlUG9wdXBTZWxlY3RvcjogJy5qcy1wb3B1cC1jbG9zZSwgLnBvcHVwX19jbG9zZScsXHJcbiAgICAgICAgYWN0aXZlQ2xhc3M6ICdpcy1hY3RpdmUnLFxyXG4gICAgICAgIGVuYWJsZUV2ZW50czogdHJ1ZVxyXG4gICAgfTtcclxuXHJcbiAgICBfLm9wdGlvbnMgPSBvcHQgPSAkLmV4dGVuZChkZWZhdWx0cywgb3B0aW9ucyB8fCB7fSk7XHJcblxyXG4gICAgXy5vcGVuID0gZnVuY3Rpb24oZWxlbWVudCkge1xyXG4gICAgICAgIHZhciBwb3B1cCA9IGVsZW1lbnQgaW5zdGFuY2VvZiBqUXVlcnkgPyBlbGVtZW50IDogJChlbGVtZW50KTtcclxuXHJcbiAgICAgICAgcG9wdXAuZmFkZUluKHtcclxuICAgICAgICAgICAgZHVyYXRpb246IG9wdC5kdXJhdGlvbixcclxuICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgcG9wdXAuYWRkQ2xhc3Mob3B0LmFjdGl2ZUNsYXNzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICBfLmNsb3NlID0gZnVuY3Rpb24oZWxlbWVudCkge1xyXG4gICAgICAgIHZhciBwb3B1cCA9IGVsZW1lbnQgaW5zdGFuY2VvZiBqUXVlcnkgPyBlbGVtZW50IDogJChlbGVtZW50KTtcclxuXHJcbiAgICAgICAgaWYgKCFwb3B1cC5oYXNDbGFzcyhvcHQuYWN0aXZlQ2xhc3MpKSByZXR1cm47XHJcblxyXG4gICAgICAgIHBvcHVwXHJcbiAgICAgICAgICAgIC5yZW1vdmVDbGFzcyhvcHQuYWN0aXZlQ2xhc3MpXHJcbiAgICAgICAgICAgIC5kZWxheShvcHQuZHVyYXRpb24pXHJcbiAgICAgICAgICAgIC5mYWRlT3V0KHtcclxuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiBvcHQuZHVyYXRpb25cclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIF8uaW5pdEV2ZW50cyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICQob3B0LmNsb3NlUG9wdXBTZWxlY3Rvcikub24oJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIF8uY2xvc2UoJCh0aGlzKS5wYXJlbnRzKG9wdC5wb3B1cFNlbGVjdG9yKSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICQob3B0LnBvcHVwU2VsZWN0b3IpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBfLmNsb3NlKHRoaXMpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAkKG9wdC5pbm5lclNlbGVjdG9yKS5vbignY2xpY2snLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIGlmIChvcHQuZW5hYmxlRXZlbnRzKSB7XHJcbiAgICAgICAgXy5pbml0RXZlbnRzKCk7XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IFBvcHVwO1xyXG4iLCJmdW5jdGlvbiBTbGlkZXIoZWxlbWVudCwgY29uZmlnKSB7XHJcblxyXG4gICAgdmFyIHNsaWNrT3B0aW9ucztcclxuXHJcbiAgICB0aGlzLiRlbCA9IGVsZW1lbnQgaW5zdGFuY2VvZiBqUXVlcnkgPyBlbGVtZW50IDogJChlbGVtZW50KTtcclxuICAgIHRoaXMuJHNsaWRlciA9IHRoaXMuJGVsLmZpbmQoJy5zbGlkZXJfX3NsaWRlcycpO1xyXG5cclxuICAgIGRlZmF1bHRzID0ge1xyXG4gICAgICAgIGF1dG9wbGF5OiB0cnVlLFxyXG4gICAgICAgIGF1dG9wbGF5U3BlZWQ6IDUwMDAsXHJcbiAgICAgICAgZmFkZTogZmFsc2UsXHJcbiAgICAgICAgYXJyb3dzOiB0cnVlLFxyXG4gICAgICAgIGRvdHM6IGZhbHNlLFxyXG4gICAgICAgIHNsaWRlOiAnLnNsaWRlJyxcclxuICAgICAgICBwcmV2QXJyb3c6IHRoaXMuJGVsLmZpbmQoJy5zbGlkZXJfX3ByZXYnKSxcclxuICAgICAgICBuZXh0QXJyb3c6IHRoaXMuJGVsLmZpbmQoJy5zbGlkZXJfX25leHQnKVxyXG4gICAgfTtcclxuXHJcbiAgICBzbGlja09wdGlvbnMgPSAkLmV4dGVuZChkZWZhdWx0cywgY29uZmlnIHx8IHt9KTtcclxuXHJcbiAgICB0aGlzLiRzbGlkZXIuc2xpY2soc2xpY2tPcHRpb25zKTtcclxuXHJcbiAgICAvLyB0aGlzLmluaXQoKTtcclxuXHJcbiAgICByZXR1cm4gdGhpcztcclxuXHJcbn1cclxuXHJcblNsaWRlci5wcm90b3R5cGUgPSB7XHJcblxyXG4gICAgY29uc3RydWN0b3I6IFNsaWRlcixcclxuXHJcbiAgICBpbml0OiBmdW5jdGlvbigpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyh0aGlzKTtcclxuICAgIH1cclxuXHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IFNsaWRlcjtcclxuIl19"}